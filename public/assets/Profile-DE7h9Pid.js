import{r as a,p as y,u as $,X as F,Y as D,w as H,j as e,m as i,e as R,Z as _,_ as U,$ as f,b as O,a0 as T,U as I,J as P,a1 as z,d as u,a2 as B,a3 as G,c as J,a4 as q,z as h}from"./index-BRr-zOR9.js";import{n as X}from"./ChartBar.es-B4dad1-N.js";const Y=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm12,24.87a83.53,83.53,0,0,1,24,7.25V203.88a83.53,83.53,0,0,1-24,7.25ZM44,128a84.12,84.12,0,0,1,72-83.13V211.13A84.12,84.12,0,0,1,44,128Zm144,58.71V69.29a83.81,83.81,0,0,1,0,117.42Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a96,96,0,0,1-96,96V32A96,96,0,0,1,224,128Z",opacity:"0.2"}),a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM40,128a88.11,88.11,0,0,1,80-87.63V215.63A88.11,88.11,0,0,1,40,128Zm96,87.63V40.37a88,88,0,0,1,0,175.26Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM40,128a88.1,88.1,0,0,1,88-88V216A88.1,88.1,0,0,1,40,128Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm6,12.2a89.86,89.86,0,0,1,20,3.63V214.17a89.86,89.86,0,0,1-20,3.63Zm32,8.23a90.48,90.48,0,0,1,20,12.81V196.76a90.48,90.48,0,0,1-20,12.81ZM38,128a90.12,90.12,0,0,1,84-89.8V217.8A90.12,90.12,0,0,1,38,128Zm160,56.5V71.5a89.81,89.81,0,0,1,0,113Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,16.37a86.4,86.4,0,0,1,16,3V212.67a86.4,86.4,0,0,1-16,3Zm32,9.26a87.81,87.81,0,0,1,16,10.54V195.83a87.81,87.81,0,0,1-16,10.54ZM40,128a88.11,88.11,0,0,1,80-87.63V215.63A88.11,88.11,0,0,1,40,128Zm160,50.54V77.46a87.82,87.82,0,0,1,0,101.08Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm4,8.09a91.58,91.58,0,0,1,24,4.27V215.64a91.58,91.58,0,0,1-24,4.27Zm32,7.25a92.21,92.21,0,0,1,24,15V197.69a92.21,92.21,0,0,1-24,15ZM36,128a92.11,92.11,0,0,1,88-91.91V219.91A92.11,92.11,0,0,1,36,128Zm160,61.9V66.1a91.83,91.83,0,0,1,0,123.8Z"}))]]),K=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M220,148v36c0,13.85-1.63,26.52-4.58,35.68a12,12,0,0,1-22.84-7.36c2.14-6.65,3.42-17.24,3.42-28.32V148a8,8,0,0,0-16,0v4a12,12,0,0,1-24,0V132a8,8,0,0,0-16,0v12a12,12,0,0,1-24,0V76a8,8,0,0,0-16,0V184a12,12,0,0,1-22.18,6.34l-18.68-30-.21-.34A8,8,0,0,0,45,167.92L70.27,209.8a12,12,0,0,1-20.56,12.39l-25.31-42-.12-.2A32,32,0,0,1,76,142.83V76a32,32,0,0,1,64,0v25a32,32,0,0,1,36.78,17A32,32,0,0,1,220,148ZM252.48,47.51l-32-32a12,12,0,0,0-17,17L215,44H172a12,12,0,0,0,0,24h43L203.51,79.51a12,12,0,1,0,17,17l32-32A12,12,0,0,0,252.48,47.51Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,140v36c0,24-8,40-8,40H64L34.68,166a20,20,0,0,1,34.64-20L88,176V68a20,20,0,0,1,40,0v56a20,20,0,0,1,40,0v16a20,20,0,0,1,40,0Z",opacity:"0.2"}),a.createElement("path",{d:"M216,140v36c0,25.59-8.49,42.85-8.85,43.58A8,8,0,0,1,200,224a7.9,7.9,0,0,1-3.57-.85,8,8,0,0,1-3.58-10.73c.06-.12,7.16-14.81,7.16-36.42V140a12,12,0,0,0-24,0v4a8,8,0,0,1-16,0V124a12,12,0,0,0-24,0v12a8,8,0,0,1-16,0V68a12,12,0,0,0-24,0V176a8,8,0,0,1-14.79,4.23l-18.68-30-.14-.23A12,12,0,1,0,41.6,162L70.89,212A8,8,0,1,1,57.08,220l-29.32-50a28,28,0,0,1,48.41-28.17L80,148V68a28,28,0,0,1,56,0V98.7a28,28,0,0,1,38.65,16.69A28,28,0,0,1,216,140Zm37.66-89.66-32-32a8,8,0,0,0-11.31,11.32L228.68,48H176a8,8,0,0,0,0,16h52.69L210.34,82.34a8,8,0,0,0,11.31,11.32l32-32A8,8,0,0,0,253.66,50.34Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,128v50.93c0,25.59-8.48,39.93-8.84,40.65A8,8,0,0,1,200,224H64a8,8,0,0,1-6.9-3.95L26.15,160a16,16,0,0,1,6.53-22.23c7.66-4,17.1-.84,21.4,6.62l21,36.44a6.09,6.09,0,0,0,6,3.09l.12,0A8.19,8.19,0,0,0,88,175.74V56a16,16,0,0,1,16.77-16c8.61.4,15.23,7.82,15.23,16.43V128a8,8,0,0,0,8.53,8,8.17,8.17,0,0,0,7.47-8.25V112a16,16,0,0,1,16.77-16c8.61.4,15.23,7.82,15.23,16.43V136a8,8,0,0,0,8.53,8,8.18,8.18,0,0,0,7.47-8.25v-7.28c0-8.61,6.62-16,15.23-16.43A16,16,0,0,1,216,128Zm37.66-77.66-32-32a8,8,0,0,0-11.32,11.32L228.69,48H176a8,8,0,0,0,0,16h52.69L210.34,82.34a8,8,0,0,0,11.32,11.32l32-32A8,8,0,0,0,253.66,50.34Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M214,140v36c0,25.13-8.28,42-8.64,42.68A6,6,0,0,1,200,222a5.87,5.87,0,0,1-2.68-.64,6,6,0,0,1-2.68-8c.07-.14,7.37-15.19,7.37-37.32V140a14,14,0,0,0-28,0v4a6,6,0,0,1-12,0V124a14,14,0,0,0-28,0v12a6,6,0,0,1-12,0V68a14,14,0,0,0-28,0V176a6,6,0,0,1-11.09,3.17l-18.68-30a1,1,0,0,1-.1-.17,14,14,0,0,0-24.25,14l29.29,50A6,6,0,0,1,58.81,219L29.49,169a26,26,0,0,1,45-26.13L82,155V68a26,26,0,0,1,52,0v34.1a26,26,0,0,1,39.42,16.39A26,26,0,0,1,214,140Zm38.24-88.24-32-32a6,6,0,0,0-8.48,8.48L233.51,50H176a6,6,0,1,0,0,12h57.51L211.76,83.76a6,6,0,1,0,8.48,8.48l32-32A6,6,0,0,0,252.24,51.76Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,140v36c0,25.59-8.49,42.85-8.85,43.58A8,8,0,0,1,200,224a7.9,7.9,0,0,1-3.57-.85,8,8,0,0,1-3.58-10.73c.06-.12,7.16-14.81,7.16-36.42V140a12,12,0,0,0-24,0v4a8,8,0,0,1-16,0V124a12,12,0,0,0-24,0v12a8,8,0,0,1-16,0V68a12,12,0,0,0-24,0V176a8,8,0,0,1-14.79,4.23l-18.68-30-.14-.23A12,12,0,1,0,41.6,162L70.89,212A8,8,0,1,1,57.08,220l-29.32-50a28,28,0,0,1,48.41-28.17L80,148V68a28,28,0,0,1,56,0V98.7a28,28,0,0,1,38.65,16.69A28,28,0,0,1,216,140Zm37.66-89.66-32-32a8,8,0,0,0-11.31,11.32L228.68,48H176a8,8,0,0,0,0,16h52.69L210.34,82.34a8,8,0,0,0,11.31,11.32l32-32A8,8,0,0,0,253.66,50.34Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M212,140v36c0,24.66-8.08,41.1-8.42,41.79a4,4,0,1,1-7.16-3.58c.07-.15,7.58-15.55,7.58-38.21V140a16,16,0,0,0-32,0v4a4,4,0,0,1-8,0V124a16,16,0,0,0-32,0v12a4,4,0,0,1-8,0V68a16,16,0,0,0-32,0V176a4,4,0,0,1-7.39,2.11l-18.68-30a.75.75,0,0,1-.07-.12,16,16,0,0,0-27.72,16l29.31,50a4,4,0,0,1-6.9,4L31.22,168a24,24,0,0,1,41.52-24.09L84,162V68a24,24,0,0,1,48,0v38.13a24,24,0,0,1,39.94,16.06A24,24,0,0,1,212,140Zm38.83-86.83-32-32a4,4,0,0,0-5.66,5.66L238.34,52H176a4,4,0,0,0,0,8h62.34L213.17,85.17a4,4,0,0,0,5.66,5.66l32-32A4,4,0,0,0,250.83,53.17Z"}))]]),j=a.forwardRef((t,l)=>a.createElement(y,{ref:l,...t,weights:Y}));j.displayName="CircleHalfIcon";const Q=j,b=a.forwardRef((t,l)=>a.createElement(y,{ref:l,...t,weights:K}));b.displayName="HandSwipeRightIcon";const W=b;function te(){const{t}=$(),{user:l}=F(),r=D(),[v,m]=a.useState(!1),[c,g]=a.useState({name:l?.name||"",email:l?.email||""}),[N,o]=a.useState(!1),[d,w]=a.useState(null);a.useEffect(()=>{H.getUserStats().then(s=>{s.success&&s.data&&w(s.data)}).catch(()=>{})},[]);function k(){m(!1),h.success(t("profile.updated"))}function V(){const s={profile:{name:l?.name,email:l?.email,username:l?.username,role:l?.role},preferences:{colorMode:r.colorMode,fontScale:r.fontScale,reducedMotion:r.reducedMotion,highContrast:r.highContrast},exportedAt:new Date().toISOString()},S=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),p=URL.createObjectURL(S),x=document.createElement("a");x.href=p,x.download="parkhub-data-export.json",x.click(),URL.revokeObjectURL(p),h.success(t("gdpr.exported"))}function A(){h.success("Account deletion requested"),o(!1)}const M=l?.name?.split(" ").map(s=>s[0]).join("").toUpperCase()||"?",Z={user:t("profile.roles.user"),admin:t("profile.roles.admin"),superadmin:t("profile.roles.superadmin")},E={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},n={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},C=["normal","protanopia","deuteranopia","tritanopia"],L=["small","normal","large","xlarge"];return e.jsxs(i.div,{variants:E,initial:"hidden",animate:"show",className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs(i.div,{variants:n,children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t("profile.title")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:t("profile.subtitle")})]}),e.jsx(i.div,{variants:n,className:"card p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-3xl font-bold text-primary-600 dark:text-primary-400",children:M})}),e.jsx("div",{className:"flex-1 text-center sm:text-left",children:v?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",htmlFor:"profile-name",children:t("profile.name")}),e.jsx("input",{id:"profile-name",type:"text",value:c.name,onChange:s=>g({...c,name:s.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",htmlFor:"profile-email",children:t("profile.email")}),e.jsx("input",{id:"profile-email",type:"email",value:c.email,onChange:s=>g({...c,email:s.target.value}),className:"input"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:k,className:"btn btn-primary btn-sm",children:[e.jsx(R,{weight:"bold",className:"w-4 h-4"}),t("common.save")]}),e.jsx("button",{onClick:()=>m(!1),className:"btn btn-secondary btn-sm",children:t("common.cancel")})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l?.name}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center sm:justify-start gap-3 mt-2",children:[e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(_,{weight:"regular",className:"w-4 h-4"}),"@",l?.username]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(U,{weight:"regular",className:"w-4 h-4"}),l?.email]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-center sm:justify-start gap-2",children:[e.jsxs("span",{className:`badge ${l?.role==="admin"||l?.role==="superadmin"?"badge-warning":"badge-info"}`,children:[e.jsx(f,{weight:"fill",className:"w-3 h-3"}),Z[l?.role||"user"]]}),e.jsxs("button",{onClick:()=>m(!0),className:"btn btn-ghost btn-sm",children:[e.jsx(O,{weight:"bold",className:"w-3.5 h-3.5"}),t("common.edit")]})]})]})})]})}),e.jsxs(i.div,{variants:n,className:"card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(T,{weight:"fill",className:"w-5 h-5 text-primary-600"}),t("profile.mySlot")]}),e.jsx("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl",children:e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:t("profile.noSlotAssigned","No parking slot assigned")})})]}),e.jsxs(i.div,{variants:n,className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("profile.bookingsThisMonth")}),e.jsx("p",{className:"stat-value text-primary-600 dark:text-primary-400 mt-1",children:d?.bookings_this_month??"-"})]}),e.jsx(I,{weight:"fill",className:"w-8 h-8 text-primary-200 dark:text-primary-800"})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("profile.homeOfficeDays")}),e.jsx("p",{className:"stat-value text-sky-600 dark:text-sky-400 mt-1",children:d?.homeoffice_days_this_month??"-"})]}),e.jsx(P,{weight:"fill",className:"w-8 h-8 text-sky-200 dark:text-sky-800"})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t("profile.avgDuration")}),e.jsx("p",{className:"stat-value text-amber-600 dark:text-amber-400 mt-1",children:d?`${d.avg_duration_minutes} min`:"-"})]}),e.jsx(X,{weight:"fill",className:"w-8 h-8 text-amber-200 dark:text-amber-800"})]})})]}),"      ",e.jsxs(i.div,{variants:n,className:"card p-6",children:["        ",e.jsx(z,{}),"      "]}),e.jsxs(i.div,{variants:n,className:"card p-6 space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(u,{weight:"fill",className:"w-5 h-5 text-primary-600"}),t("accessibility.title")]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center gap-2",children:[e.jsx(u,{weight:"regular",className:"w-4 h-4"}),t("accessibility.colorMode")]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:C.map(s=>e.jsx("button",{onClick:()=>r.setColorMode(s),className:`px-3 py-2 rounded-xl text-xs font-medium transition-all ${r.colorMode===s?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400 ring-2 ring-primary-500":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"aria-pressed":r.colorMode===s,children:t(`accessibility.colorModes.${s}`)},s))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center gap-2",children:[e.jsx(B,{weight:"regular",className:"w-4 h-4"}),t("accessibility.fontScale")]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:L.map(s=>e.jsx("button",{onClick:()=>r.setFontScale(s),className:`px-3 py-2 rounded-xl text-xs font-medium transition-all ${r.fontScale===s?"bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-400 ring-2 ring-primary-500":"bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"aria-pressed":r.fontScale===s,children:t(`accessibility.fontScales.${s}`)},s))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{weight:"regular",className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t("accessibility.reducedMotion")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("accessibility.reducedMotionDesc")})]})]}),e.jsx("button",{onClick:()=>r.setReducedMotion(!r.reducedMotion),role:"switch","aria-checked":r.reducedMotion,className:`relative w-11 h-6 rounded-full transition-colors ${r.reducedMotion?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${r.reducedMotion?"translate-x-5":""}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{weight:"regular",className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t("accessibility.highContrast")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("accessibility.highContrastDesc")})]})]}),e.jsx("button",{onClick:()=>r.setHighContrast(!r.highContrast),role:"switch","aria-checked":r.highContrast,className:`relative w-11 h-6 rounded-full transition-colors ${r.highContrast?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"}`,children:e.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${r.highContrast?"translate-x-5":""}`})})]})]}),e.jsxs(i.div,{variants:n,className:"card p-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(f,{weight:"fill",className:"w-5 h-5 text-primary-600"}),"DSGVO / GDPR"]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{onClick:V,className:"btn btn-secondary flex-1",children:[e.jsx(G,{weight:"bold",className:"w-4 h-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:t("gdpr.dataExport")}),e.jsx("div",{className:"text-xs opacity-60",children:t("gdpr.dataExportDesc")})]})]}),e.jsxs("button",{onClick:()=>o(!0),className:"btn btn-danger flex-1",children:[e.jsx(J,{weight:"bold",className:"w-4 h-4"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:t("gdpr.deleteAccount")}),e.jsx("div",{className:"text-xs opacity-60",children:t("gdpr.deleteAccountDesc")})]})]})]})]}),e.jsx(q,{open:N,onCancel:()=>o(!1),onConfirm:A,title:t("gdpr.deleteConfirmTitle"),message:t("gdpr.deleteConfirmMessage"),confirmLabel:t("gdpr.deleteConfirmBtn"),variant:"danger"})]})}export{te as ProfilePage};
